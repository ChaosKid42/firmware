Index: packages/net/xtables-addons/patches/002-fix-kernel-version-detection.patch
===================================================================
--- packages/net/xtables-addons/patches/002-fix-kernel-version-detection.patch	(revision 29988)
+++ packages/net/xtables-addons/patches/002-fix-kernel-version-detection.patch	(revision 31282)
@@ -1,5 +1,5 @@
 --- a/configure
 +++ b/configure
-@@ -11693,7 +11693,7 @@ regular_CFLAGS="-Wall -Waggregate-return
+@@ -11617,7 +11617,7 @@ regular_CFLAGS="-Wall -Waggregate-return
  if test -n "$kbuilddir"; then
  	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking kernel version that we will build against" >&5
@@ -12,5 +12,5 @@
 --- a/configure.ac
 +++ b/configure.ac
-@@ -44,7 +44,7 @@ regular_CFLAGS="-Wall -Waggregate-return
+@@ -43,7 +43,7 @@ regular_CFLAGS="-Wall -Waggregate-return
  
  if test -n "$kbuilddir"; then
Index: packages/net/xtables-addons/patches/004-linux_3_3_compat.patch
===================================================================
--- packages/net/xtables-addons/patches/004-linux_3_3_compat.patch	(revision 31282)
+++ packages/net/xtables-addons/patches/004-linux_3_3_compat.patch	(revision 31282)
@@ -0,0 +1,11 @@
+--- a/extensions/compat_xtables.h
++++ b/extensions/compat_xtables.h
+@@ -102,6 +102,8 @@
+ #	define nf_nat_ipv4_multi_range_compat nf_nat_multi_range_compat
+ #	define nf_nat_ipv4_range nf_nat_range
+ #	define NF_NAT_RANGE_MAP_IPS IP_NAT_RANGE_MAP_IPS
++#	define NF_NAT_MANIP_SRC IP_NAT_MANIP_SRC
++#	define NF_NAT_MANIP_DST IP_NAT_MANIP_DST
+ #endif
+ 
+ #if !defined(NIP6) && !defined(NIP6_FMT)
Index: packages/net/xtables-addons/patches/100-add-rtsp-conntrack.patch
===================================================================
--- packages/net/xtables-addons/patches/100-add-rtsp-conntrack.patch	(revision 29988)
+++ packages/net/xtables-addons/patches/100-add-rtsp-conntrack.patch	(revision 31282)
@@ -824,5 +824,5 @@
 --- /dev/null
 +++ b/extensions/rtsp/nf_nat_rtsp.c
-@@ -0,0 +1,489 @@
+@@ -0,0 +1,491 @@
 +/*
 + * RTSP extension for TCP NAT alteration
@@ -871,4 +871,6 @@
 +#define NF_NEED_MIME_NEXTLINE
 +#include "netfilter_mime.h"
++
++#include "../compat_xtables.h"
 +
 +#define MAX_PORTS       8
@@ -1257,5 +1259,5 @@
 +static void expected(struct nf_conn* ct, struct nf_conntrack_expect *exp)
 +{
-+    struct nf_nat_multi_range_compat mr;
++    struct nf_nat_ipv4_multi_range_compat mr;
 +    u_int32_t newdstip, newsrcip, newip;
 +
@@ -1265,5 +1267,5 @@
 +    newsrcip = ct->tuplehash[IP_CT_DIR_ORIGINAL].tuple.src.u3.ip;
 +    //FIXME (how to port that ?)
-+    //code from 2.4 : newip = (HOOK2MANIP(hooknum) == IP_NAT_MANIP_SRC) ? newsrcip : newdstip;
++    //code from 2.4 : newip = (HOOK2MANIP(hooknum) == NF_NAT_MANIP_SRC) ? newsrcip : newdstip;
 +    newip = newdstip;
 +
@@ -1273,8 +1275,8 @@
 +    mr.rangesize = 1;
 +    // We don't want to manip the per-protocol, just the IPs. 
-+    mr.range[0].flags = IP_NAT_RANGE_MAP_IPS;
++    mr.range[0].flags = NF_NAT_RANGE_MAP_IPS;
 +    mr.range[0].min_ip = mr.range[0].max_ip = newip;
 +
-+    nf_nat_setup_info(ct, &mr.range[0], IP_NAT_MANIP_DST);
++    nf_nat_setup_info(ct, &mr.range[0], NF_NAT_MANIP_DST);
 +}
 +
@@ -1316,5 +1318,5 @@
 --- a/extensions/Kbuild
 +++ b/extensions/Kbuild
-@@ -34,6 +34,7 @@ obj-${build_lscan}       += xt_lscan.o
+@@ -33,6 +33,7 @@ obj-${build_lscan}       += xt_lscan.o
  obj-${build_pknock}      += pknock/
  obj-${build_psd}         += xt_psd.o
@@ -1326,5 +1328,5 @@
 --- a/mconfig
 +++ b/mconfig
-@@ -27,3 +27,4 @@ build_lscan=m
+@@ -26,3 +26,4 @@ build_lscan=m
  build_pknock=m
  build_psd=m
Index: packages/net/xtables-addons/patches/003-redundant-bracket.patch
===================================================================
--- packages/net/xtables-addons/patches/003-redundant-bracket.patch	(revision 29988)
+++ packages/net/xtables-addons/patches/003-redundant-bracket.patch	(revision 31282)
@@ -1,5 +1,5 @@
 --- a/configure.ac
 +++ b/configure.ac
-@@ -31,7 +31,7 @@ PKG_CHECK_MODULES([libmnl], [libmnl >= 1
+@@ -30,7 +30,7 @@ xtlibdir="$(pkg-config --variable=xtlibd
  
  AC_ARG_WITH([xtlibdir],
Index: packages/net/xtables-addons/patches/201-fix-lua-packetscript.patch
===================================================================
--- packages/net/xtables-addons/patches/201-fix-lua-packetscript.patch	(revision 30901)
+++ packages/net/xtables-addons/patches/201-fix-lua-packetscript.patch	(revision 31282)
@@ -79,5 +79,5 @@
  #define SHRT_MAX        32767
  #define BUFSIZ 		8192
-@@ -637,6 +641,8 @@ union luai_Cast { double l_d; long l_l; 
+@@ -637,6 +641,8 @@ union luai_Cast { double l_d; long l_l;
  */
  #if defined(__KERNEL__)
Index: packages/net/xtables-addons/patches/200-add-lua-packetscript.patch
===================================================================
--- packages/net/xtables-addons/patches/200-add-lua-packetscript.patch	(revision 30901)
+++ packages/net/xtables-addons/patches/200-add-lua-packetscript.patch	(revision 31282)
@@ -18207,5 +18207,5 @@
 --- a/extensions/Kbuild
 +++ b/extensions/Kbuild
-@@ -35,6 +35,7 @@ obj-${build_pknock}      += pknock/
+@@ -34,6 +34,7 @@ obj-${build_pknock}      += pknock/
  obj-${build_psd}         += xt_psd.o
  obj-${build_quota2}      += xt_quota2.o
@@ -18217,5 +18217,5 @@
 --- a/extensions/Mbuild
 +++ b/extensions/Mbuild
-@@ -27,3 +27,4 @@ obj-${build_pknock}      += pknock/
+@@ -26,3 +26,4 @@ obj-${build_pknock}      += pknock/
  obj-${build_psd}         += libxt_psd.so
  obj-${build_quota2}      += libxt_quota2.so
@@ -18224,5 +18224,5 @@
 --- a/mconfig
 +++ b/mconfig
-@@ -28,3 +28,4 @@ build_pknock=m
+@@ -27,3 +27,4 @@ build_pknock=m
  build_psd=m
  build_quota2=m
Index: packages/net/xtables-addons/Makefile
===================================================================
--- packages/net/xtables-addons/Makefile	(revision 31281)
+++ packages/net/xtables-addons/Makefile	(revision 31282)
@@ -10,9 +10,9 @@
 
 PKG_NAME:=xtables-addons
-PKG_VERSION:=1.41
-PKG_RELEASE:=4
+PKG_VERSION:=1.42
+PKG_RELEASE:=1
 
 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.xz
-PKG_MD5SUM:=a8de5e5e5823aefcbab210159f122564
+PKG_MD5SUM:=7c996a0400667b57ab4fb53a013ae742
 PKG_SOURCE_URL:=@SF/xtables-addons
 PKG_BUILD_DEPENDS:=iptables
