--- /dev/null	2012-06-07 20:34:02.149931178 +0200
+++ package/dnsmasq/patches/200-ff-timing.patch	2012-06-08 00:57:55.632848968 +0200
@@ -0,0 +1,117 @@
+--- a/src/radv.c	2012-06-05 21:11:07.099187430 +0200
++++ b/src/radv.c	2012-06-05 21:11:13.755828137 +0200
+@@ -201,7 +201,7 @@
+   ra->code = 0;
+   ra->hop_limit = hop_limit;
+   ra->flags = 0x00;
+-  ra->lifetime = htons(1800); /* AdvDefaultLifetime*/
++  ra->lifetime = htons(120); /* AdvDefaultLifetime*/
+   ra->reachable_time = 0;
+   ra->retrans_time = 0;
+ 
+@@ -261,7 +261,7 @@
+ 	  put_opt6_char(ICMP6_OPT_RDNSS);
+ 	  put_opt6_char((opt_cfg->len/8) + 1);
+ 	  put_opt6_short(0);
+-	  put_opt6_long(1800); /* lifetime - twice RA retransmit */
++	  put_opt6_long(120); /* lifetime - twice RA retransmit */
+ 	  /* zero means "self" */
+ 	  for (i = 0; i < opt_cfg->len; i += IN6ADDRSZ, a++)
+ 	    if (IN6_IS_ADDR_UNSPECIFIED(a))
+@@ -277,7 +277,7 @@
+ 	  put_opt6_char(ICMP6_OPT_DNSSL);
+ 	  put_opt6_char(len + 1);
+ 	  put_opt6_short(0);
+-	  put_opt6_long(1800); /* lifetime - twice RA retransmit */
++	  put_opt6_long(120); /* lifetime - twice RA retransmit */
+ 	  put_opt6(opt_cfg->val, opt_cfg->len);
+ 	  
+ 	  /* pad */
+@@ -292,7 +292,7 @@
+       put_opt6_char(ICMP6_OPT_RDNSS);
+       put_opt6_char(3);
+       put_opt6_short(0);
+-      put_opt6_long(1800); /* lifetime - twice RA retransmit */
++      put_opt6_long(120); /* lifetime - twice RA retransmit */
+       put_opt6(&parm.link_local, IN6ADDRSZ);
+     }
+ 
+@@ -409,8 +409,8 @@
+ 		  setaddr6part(local, addr6part(local) & ~((prefix == 64) ? (u64)-1LL : (1LLU << (128 - prefix)) - 1LLU));
+ 		  
+ 		  /* lifetimes must be min 2 hrs, by RFC 2462 */
+-		  if (time < 7200)
+-		    time = 7200;
++		  if (time < 60)
++		    time = 60;
+ 		  
+ 		  opt->type = ICMP6_OPT_PREFIX;
+ 		  opt->len = 4;
+--- a/src/dnsmasq.c	2012-06-05 21:53:47.432749234 +0200
++++ b/src/dnsmasq.c	2012-06-05 21:53:50.286071441 +0200
+@@ -603,7 +603,7 @@
+ 		{
+ 		  char *p = daemon->namebuff;
+ 		  p += sprintf(p, _("prefix valid "));
+-		  prettyprint_time(p, dhcp_tmp->lease_time > 7200 ? dhcp_tmp->lease_time : 7200);
++		  prettyprint_time(p, dhcp_tmp->lease_time > 600 ? dhcp_tmp->lease_time : 600);
+ 		}
+ 	      my_syslog(MS_DHCP | LOG_INFO, _("SLAAC on %s %s"), 
+ 			daemon->addrbuff, daemon->namebuff);
+--- a/src/radv.c	2012-06-05 23:25:07.232541260 +0200
++++ b/src/radv.c	2012-06-05 23:25:10.519195108 +0200
+@@ -423,7 +423,7 @@
+ 		  opt->prefix = *local;
+ 		  
+ 		  inet_ntop(AF_INET6, local, daemon->addrbuff, ADDRSTRLEN);
+-		  my_syslog(MS_DHCP | LOG_INFO, "RTR-ADVERT(%s) %s", param->if_name, daemon->addrbuff); 		    
++		  my_syslog(MS_DHCP | LOG_INFO, "RTR-ADVERT(%s) %s valid_lft(%i) preferred_lft(%i)", param->if_name, daemon->addrbuff, opt->valid_lifetime, opt->preferred_lifetime); 		    
+ 		}
+ 	    }
+ 	}
+--- a/src/config.h	2012-06-05 23:42:35.542902629 +0200
++++ b/src/config.h	2012-06-05 23:44:00.919236325 +0200
+@@ -34,7 +34,7 @@
+ #define HOSTSFILE "/etc/hosts"
+ #define ETHERSFILE "/etc/ethers"
+ #define RUNFILE "/var/run/dnsmasq.pid"
+-#define DEFLEASE 3600 /* default lease time, 1 hour */
++#define DEFLEASE 60 /* default lease time, 1 min */
+ #define CHUSER "nobody"
+ #define CHGRP "dip"
+ #define TFTP_MAX_CONNECTIONS 50 /* max simultaneous connections */
+--- a/src/radv.c	2012-06-07 00:34:11.330685297 +0200
++++ b/src/radv.c	2012-06-07 00:34:24.367301120 +0200
+@@ -516,8 +516,8 @@
+ 	    /* range 5 - 20 */
+ 	    context->ra_time = param->now + 5 + (rand16()/4400);
+ 	  else
+-	    /* range 450 - 600 */
+-	    context->ra_time = param->now + 450 + (rand16()/440);
++	    /* range 45 - 60 */
++	    context->ra_time = param->now + 45 + (rand16()/4400);
+ 	  
+ 	  return 0; /* found, abort */
+ 	}
+--- a/src/dnsmasq.c	2012-06-07 01:05:34.641809581 +0200
++++ b/src/dnsmasq.c	2012-06-07 01:07:07.028115939 +0200
+@@ -603,7 +603,7 @@
+ 		{
+ 		  char *p = daemon->namebuff;
+ 		  p += sprintf(p, _("prefix valid "));
+-		  prettyprint_time(p, dhcp_tmp->lease_time > 600 ? dhcp_tmp->lease_time : 600);
++		  prettyprint_time(p, dhcp_tmp->lease_time > 60 ? dhcp_tmp->lease_time : 60);
+ 		}
+ 	      my_syslog(MS_DHCP | LOG_INFO, _("SLAAC on %s %s"), 
+ 			daemon->addrbuff, daemon->namebuff);
+--- a/src/radv.c	2012-06-07 22:33:42.787754364 +0200
++++ b/src/radv.c	2012-06-07 22:33:49.994392925 +0200
+@@ -418,7 +418,7 @@
+ 		  /* autonomous only if we're not doing dhcp */
+ 		  opt->flags = do_slaac ? 0x40 : 0x00;
+ 		  opt->valid_lifetime = htonl(time);
+-		  opt->preferred_lifetime = htonl(deprecate ? 0 : time);
++		  opt->preferred_lifetime = htonl(deprecate ? 0 : time/2);
+ 		  opt->reserved = 0; 
+ 		  opt->prefix = *local;
+ 		  
